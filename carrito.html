<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carrito - Impulso Digital</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- üß≠ Barra de navegaci√≥n -->
  <header class="barra-superior">
    <div class="contenedor-barra">
      <h1 class="logo"><a href="index.html">Impulso Digital</a></h1>
      <nav class="menu-principal">
        <ul>
          <li><a href="index.html">Inicio</a></li>
          <li><a href="packs.html">Packs</a></li>
          <li><a href="excel.html">Excel</a></li>
        </ul>
      </nav>
      <a href="carrito.html" class="icono-carrito">üõí</a>
    </div>
  </header>

  <!-- üõí Contenido principal del carrito -->
  <main class="contenedor">
    <section class="carrito-section">
      <h2 style="margin-top: 2rem;">üõçÔ∏è Tu carrito de compras</h2>

      <div class="tabla-carrito" style="overflow-x: auto; margin-top: 2rem;">
        <table style="width: 100%; border-collapse: collapse;">
          <thead style="background-color: #f0f0f0;">
            <tr>
              <th>Pack</th>
              <th>Cantidad</th>
              <th>Precio</th>
              <th>Total</th>
              <th>Eliminar</th>
            </tr>
          </thead>
          <tbody id="cart-items"></tbody>
        </table>
      </div>

      <div class="cart-total" style="text-align: right; margin-top: 2rem;">
        <h3>Total: <span id="cart-total">0 ‚Ç¨</span></h3>
        <button id="clear-cart" class="boton-pack" style="background-color: #c62828;">Vaciar carrito</button>
        <a id="checkout" class="boton-pack" href="#" target="_blank" style="margin-left: 1rem; background-color: #0070ba;">Pagar con PayPal</a>
      </div>
    </section>
  </main>

  <!-- üìú Script de gesti√≥n del carrito -->
  <script>
    let cart = JSON.parse(localStorage.getItem('carrito')) || [];

    // Actualiza precios si los packs est√°n en el carrito
    cart.forEach(item => {
      if (item.nombre === "Pack 2 sesiones") item.price = 150;
      if (item.nombre === "Pack 5 sesiones") item.price = 270;
      if (item.nombre === "Pack 10 sesiones") item.price = 550;
    });

    function updateCart() {
      const cartItems = document.getElementById('cart-items');
      const cartTotal = document.getElementById('cart-total');
      const checkoutBtn = document.getElementById('checkout');

      cartItems.innerHTML = '';
      let total = 0;

      cart.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${item.nombre}</td>
          <td><input type="number" value="${item.quantity}" min="1" data-index="${index}" class="quantity-input" style="width: 60px;"></td>
          <td>${item.price} ‚Ç¨</td>
          <td>${itemTotal.toFixed(2)} ‚Ç¨</td>
          <td><button class="remove-item boton-pack" data-index="${index}" style="background-color: #c62828;">X</button></td>
        `;
        cartItems.appendChild(tr);
      });

      cartTotal.textContent = total.toFixed(2) + ' ‚Ç¨';
      checkoutBtn.href = `https://www.paypal.me/mburgadap/${total.toFixed(2)}`;
      localStorage.setItem('carrito', JSON.stringify(cart));
    }

    document.getElementById('cart-items').addEventListener('input', e => {
      if (e.target.classList.contains('quantity-input')) {
        const index = e.target.dataset.index;
        cart[index].quantity = parseInt(e.target.value);
        updateCart();
      }
    });

    document.getElementById('cart-items').addEventListener('click', e => {
      if (e.target.classList.contains('remove-item')) {
        const index = e.target.dataset.index;
        cart.splice(index, 1);
        updateCart();
      }
    });

    document.getElementById('clear-cart').addEventListener('click', () => {
      cart = [];
      updateCart();
    });

    updateCart();
  </script>

</body>
</html>
