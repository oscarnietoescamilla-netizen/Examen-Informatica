<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carrito - Impulso Digital</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

 <!-- Barra superior -->
  <header class="barra-superior">
    <div class="contenedor-barra">
      <h1 class="logo"><a href="index.html">Impulso Digital</a></h1>
      <nav class="menu-principal">
        <ul>
          <li><a href="index.html">Inicio</a></li>
          <li><a href="packs.html">Packs</a></li>
          <li><a href="excel.html">Excel</a></li>
        </ul>
      </nav>
      <a href="carrito.html" class="icono-carrito">ðŸ›’</a>
    </div>
  </header>

  <main class="contenedor">
    <h2>Tu carrito</h2>
    <table>
      <thead>
        <tr>
          <th>Pack</th>
          <th>Cantidad</th>
          <th>Precio</th>
          <th>Total</th>
          <th></th>
        </tr>
      </thead>
      <tbody id="cart-items"></tbody>
    </table>

    <div class="cart-total" style="text-align: right; margin-top: 1rem;">
      <h3>Total: <span id="cart-total">0 â‚¬</span></h3>
      <button id="clear-cart">Vaciar carrito</button>
      <a id="checkout" class="boton-pack" href="#" target="_blank" style="margin-left: 1rem; background-color: #0070ba;">Pagar con PayPal</a>
    </div>
  </main>

  <script>
    let cart = JSON.parse(localStorage.getItem('carrito')) || [];

    function updateCart() {
      const cartItems = document.getElementById('cart-items');
      const cartCount = document.getElementById('cart-count');
      const cartTotal = document.getElementById('cart-total');
      const checkoutBtn = document.getElementById('checkout');

      cartItems.innerHTML = '';
      let total = 0;

      cart.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${item.nombre}</td>
          <td><input type="number" value="${item.quantity}" min="1" data-index="${index}" class="quantity-input"></td>
          <td>${item.price} â‚¬</td>
          <td>${itemTotal.toFixed(2)} â‚¬</td>
          <td><button class="remove-item" data-index="${index}">X</button></td>
        `;
        cartItems.appendChild(tr);
      });

      cartCount.textContent = cart.length;
      cartTotal.textContent = total.toFixed(2) + ' â‚¬';
      checkoutBtn.href = `https://www.paypal.me/mburgadap/${total.toFixed(2)}`;
      localStorage.setItem('carrito', JSON.stringify(cart));
    }

    document.getElementById('cart-items').addEventListener('input', e => {
      if (e.target.classList.contains('quantity-input')) {
        const index = e.target.dataset.index;
        cart[index].quantity = parseInt(e.target.value);
        updateCart();
      }
    });

    document.getElementById('cart-items').addEventListener('click', e => {
      if (e.target.classList.contains('remove-item')) {
        const index = e.target.dataset.index;
        cart.splice(index, 1);
        updateCart();
      }
    });

    document.getElementById('clear-cart').addEventListener('click', () => {
      cart = [];
      updateCart();
    });

    updateCart();
  </script>

</body>
</html>
